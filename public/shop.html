<!DOCTYPE>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Shop</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            var url = "http://localhost:8080/dsaApp/game/shop";
                $.get(url, function (data) {
                    for (var key = 0; key < 3; key++) {
                        $("#tabla").append("<tr><td>" + data[key].name + "</td><td>" + data[key].description + "</td><td>" + data[key].price + "</td></tr>");

                    }
                });

            $("#logoutButton").click(function () {
                location.href = "/index.html"
            });

            let item = localStorage.getItem("item");
            $("#item").text(item);

            $("#tabla").on('click','#button',function(){
                var currentRow=$(this).closest("tr");
                var call = currentRow.find("td:eq(0)").text();
                alert(call);
                var dataBody=
                    {
                        name: call,
                        item: item,
                        quantity: 1,

                    }
                var URL = "/dsaApp/game/buyItems";
                $.post({
                    url: URL,
                    data: JSON.stringify(dataBody),
                    contentType: 'application/json; charset=utf-8'
                })
                    .done(function (data, status) {
                        alert("Item added to your inventory");
                        location.reload();

                    })
                    .fail(function (xhr, err) {
                        alert("Item added");
                    })

            });
        });
    </script>
</head>
<body>
<div class="container mt-3"style="text-align:center">
    <h3>Shop</h3>
    <p>These are the items available for purchase!</p>
</div>
<div class="container">
    <table class="table table-striped" id="tabla">
        <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Price</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <div class="form-group">
        <button type="submit" class="btn btn-primary btn-block" id = "logoutButton"> Log Out</button>
        <div class="signup_link" style="text-align:center">
        </div>
    </div>
</div>
</body>
</html>